# 操作系统

### 硬件系统

* CPU
  * 运算单元
  * 控制单元
* 主存储器
* 外围设备
  * 输出、输入、存储、网络通讯设备
* 通过 **总线** 连接

### 储存程序计算机

* 冯 诺伊曼
* 以运算单元为中心，控制流由指令产生
* 采用存储程序原理，面向主存组织数据流
* 主存是按地址访问，线性编址的空间
* 指令由操作码和地址码组成
* 二进制

### 软件系统

* 系统软件
  * 操作系统，实用程序（文件文本处理等），语言处理程序
* 支撑软件
* 应用软件

![](img/os1.jpg)



### 计算机操作系统的发展

* 计算机的手工操作
* 装入程序的引进（卡片和纸带）
* 引入汇编语言
* 引入高级语言
* 简单的批处理系统（作业控制语言）
* 操作系统与自动化操作控制

### 资源技术

* 复用
* 虚拟
* 抽象
  * 进程抽象、虚存抽象、文件抽象

### 总线

* 北桥：主存控制器 速度较快，靠近 CPU
* 南桥：I/O控制器

### I/O控制

* 轮询、中断、DMA


### 分类

从操作控制方式看

* 多道批处理操作系统 
* 分时操作系统 time-sharing
* 实时操作系统  real-time


### 资源管理的角度

* 屏蔽资源使用的底层细节
  * 驱动程序
* 资源共享方式
  * 独占使用方式
  * 并发使用方式
* 资源分配策略
  * 静态分配（开始时全部装入）
  * 动态分配（死锁）
  * 资源抢占

### 程序控制角度

* 多道程序设计
  * CPU与外部设备充分并行
  * 外部设备之间充分并行
  * 发挥CPU的使用效率
  * 提高单位时间的算题量
* 进程
  * 为进入内存的程序建立的管理实体

### 操作系统控制计算机方式角度

* 脱机作业控制方式
  * 作业说明书
* 联机作业控制方式
  * 计算机：提供终端
  * 用户：登录系统 
  * OS：命令解释程序
  * 用户：联机输入命令，直接控制作业的执行
  * 今天的图形化只是这些命令的包装


### 程序接口角度


### 系统调用的实现机制

* 陷入处理机制：陷入后的处理
* 陷入指令：使系统陷入
* 约定寄存器传递编号
* 入口地址表（包含参数个数）
* 现场保护机制




## 第二章 处理器管理

### 处理器与寄存器

![](img/os2.jpg)

* 寄存器
  * 用户程序可见寄存器
    * 数据寄存器
    * 地址寄存器
      * 索引、栈地址、段地址
  * 控制与状态寄存器
    * PC、IR、条件码CC、标志位
  * 程序状态字PSW
    * 当前程序运行的状态信息
    * 既是操作系统的概念，也是一组寄存器

### 机器指令与处理模式







### 进程三态

![](img/os3.jpg)